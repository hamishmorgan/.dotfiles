#!/usr/bin/env bash
# Run complete validation: lint + test + ci

set -o pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

readonly GREEN='\033[0;32m'
readonly BLUE='\033[0;34m'
readonly NC='\033[0m'

log_info() {
  echo -e "${BLUE}●${NC} $1"
}

log_success() {
  echo -e "${GREEN}✓${NC} $1"
}

main() {
  echo ""
  log_info "Running complete validation suite..."
  echo ""

  log_info "Step 1/3: Linting..."
  if ! "$SCRIPT_DIR/lint"; then
    return 1
  fi
  echo ""

  log_info "Step 2/3: Testing..."
  if ! "$SCRIPT_DIR/test"; then
    return 1
  fi
  echo ""

  log_info "Step 3/3: Local CI..."
  if ! "$SCRIPT_DIR/ci"; then
    return 1
  fi
  echo ""

  log_success "All validation checks passed!"
  echo ""
}

main "$@"

